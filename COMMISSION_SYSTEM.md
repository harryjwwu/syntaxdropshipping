# ä½£é‡‘ç³»ç»Ÿ (Commission System) 

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

Syntax Dropshipping ä½£é‡‘ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¨èè¿”ä½£è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä¸€å±‚æ¨èè¿”ä½£æ¨¡å¼ï¼Œä¸ºç”¨æˆ·æä¾›æ¨èå¥–åŠ±æœºåˆ¶ã€‚

### æ ¸å¿ƒç‰¹æ€§
- âœ… **ä¸€å±‚æ¨èè¿”ä½£**ï¼šAæ¨èBï¼ŒBä¸‹å•åAè·å¾—2%ä½£é‡‘
- âœ… **æ¨èç ç³»ç»Ÿ**ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ¨èç å’Œæ¨èé“¾æ¥
- âœ… **å†»ç»“æœŸç®¡ç†**ï¼š15-20å¤©å†»ç»“æœŸï¼Œç¡®è®¤æ— é€€è´§åç»“ç®—
- âœ… **æç°ç®¡ç†**ï¼šæ”¯æŒå¤šç§æç°æ–¹å¼ï¼ˆé“¶è¡Œè½¬è´¦ã€PayPalã€æ”¯ä»˜å®ã€å¾®ä¿¡ï¼‰
- âœ… **è‡ªåŠ¨åŒ–å¤„ç†**ï¼šå®šæ—¶ä»»åŠ¡è‡ªåŠ¨å¤„ç†åˆ°æœŸä½£é‡‘
- âœ… **ç®¡ç†åå°**ï¼šå®Œæ•´çš„ç®¡ç†å‘˜å®¡æ ¸å’Œç»Ÿè®¡åŠŸèƒ½

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•°æ®åº“è®¾è®¡
```sql
-- ç”¨æˆ·è¡¨æ‰©å±•ï¼ˆæ·»åŠ æ¨èç›¸å…³å­—æ®µï¼‰
users (
  referral_code VARCHAR(50) UNIQUE,  -- ç”¨æˆ·æ¨èç 
  referred_by INT                    -- æ¨èäººID
)

-- æ¨èå…³ç³»è¡¨
referral_relationships (
  referrer_id, referee_id, referral_code, status
)

-- ä½£é‡‘è®°å½•è¡¨
commission_records (
  order_id, referrer_id, referee_id, 
  order_amount, commission_amount, commission_rate,
  status, freeze_until, paid_at
)

-- ä½£é‡‘è´¦æˆ·è¡¨
commission_accounts (
  user_id, total_earned, available_balance, 
  frozen_balance, total_withdrawn, total_referrals
)

-- æç°è®°å½•è¡¨
commission_withdrawals (
  user_id, withdrawal_number, amount, method, 
  account_info, status, admin_id
)

-- ä½£é‡‘è®¾ç½®è¡¨
commission_settings (
  setting_name, setting_value, data_type, description
)
```

### åç«¯æ¶æ„
```
server/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ commissionManager.js      # ä½£é‡‘ç®¡ç†æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ commissionCronJob.js      # å®šæ—¶ä»»åŠ¡å¤„ç†
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ commission.js             # ä½£é‡‘APIè·¯ç”±
â”‚   â”œâ”€â”€ orders.js                 # è®¢å•APIè·¯ç”±ï¼ˆé›†æˆä½£é‡‘ï¼‰
â”‚   â””â”€â”€ auth.js                   # è®¤è¯è·¯ç”±ï¼ˆé›†æˆæ¨èç ï¼‰
â””â”€â”€ config/
    â””â”€â”€ database-schema.sql       # æ•°æ®åº“ç»“æ„
```

### å‰ç«¯æ¶æ„
```
client/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ CommissionPage.js         # ä½£é‡‘ä¸­å¿ƒé¡µé¢
â”‚   â””â”€â”€ RegisterPage.js           # æ³¨å†Œé¡µé¢ï¼ˆæ”¯æŒæ¨èç ï¼‰
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Navbar.js                 # å¯¼èˆªæ ï¼ˆä½£é‡‘ä¸­å¿ƒå…¥å£ï¼‰
â””â”€â”€ utils/
    â””â”€â”€ api.js                    # APIæ¥å£é…ç½®
```

## ğŸ“‹ API æ¥å£

### ç”¨æˆ·ç«¯æ¥å£

#### è·å–æ¨èç 
```
GET /api/commission/referral-code
Response: { referralCode, referralLink }
```

#### è·å–ä½£é‡‘è´¦æˆ·
```
GET /api/commission/account
Response: { total_earned, available_balance, frozen_balance, ... }
```

#### è·å–ä½£é‡‘è®°å½•
```
GET /api/commission/records?page=1&limit=20
Response: { records, pagination }
```

#### è·å–æ¨èç»Ÿè®¡
```
GET /api/commission/referral-stats
Response: { referrals, commissionStats }
```

#### ç”³è¯·æç°
```
POST /api/commission/withdrawal
Body: { amount, method, accountInfo }
```

#### è·å–æç°è®°å½•
```
GET /api/commission/withdrawals?page=1&limit=20
Response: { withdrawals, pagination }
```

### ç®¡ç†å‘˜æ¥å£

#### è·å–æ‰€æœ‰ä½£é‡‘è®°å½•
```
GET /api/commission/admin/records?page=1&limit=20&status=frozen
```

#### è·å–æ‰€æœ‰æç°ç”³è¯·
```
GET /api/commission/admin/withdrawals?page=1&limit=20&status=pending
```

#### å¤„ç†æç°ç”³è¯·
```
PUT /api/commission/admin/withdrawals/:id
Body: { status, adminNotes }
```

### è®¢å•ç³»ç»Ÿé›†æˆ

#### åˆ›å»ºè®¢å•
```
POST /api/orders
Body: { items, shippingAddress, billingAddress, ... }
```

#### æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆè§¦å‘ä½£é‡‘è®¡ç®—ï¼‰
```
PUT /api/orders/:id/status
Body: { status: 'processing', trackingNumber, notes }
```

## ğŸ”„ ä¸šåŠ¡æµç¨‹

### 1. æ¨èæ³¨å†Œæµç¨‹
```
ç”¨æˆ·Aç”Ÿæˆæ¨èé“¾æ¥ â†’ ç”¨æˆ·Bé€šè¿‡é“¾æ¥æ³¨å†Œ â†’ ç³»ç»Ÿå»ºç«‹æ¨èå…³ç³» â†’ ä¸ºç”¨æˆ·Båˆ†é…æ¨èç 
```

### 2. ä½£é‡‘äº§ç”Ÿæµç¨‹
```
ç”¨æˆ·Bä¸‹å• â†’ è®¢å•ä»˜æ¬¾æˆåŠŸ â†’ ç®¡ç†å‘˜æ›´æ–°è®¢å•çŠ¶æ€ä¸ºprocessing â†’ 
ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ä½£é‡‘ â†’ ä½£é‡‘è¿›å…¥å†»ç»“çŠ¶æ€ï¼ˆ15-20å¤©ï¼‰
```

### 3. ä½£é‡‘ç»“ç®—æµç¨‹
```
å®šæ—¶ä»»åŠ¡æ£€æŸ¥å†»ç»“æœŸ â†’ å†»ç»“æœŸåˆ°æœŸ â†’ ä½£é‡‘çŠ¶æ€å˜æ›´ä¸ºavailable â†’ 
ç”¨æˆ·å¯ç”³è¯·æç° â†’ ç®¡ç†å‘˜å®¡æ ¸ â†’ æç°å®Œæˆ
```

### 4. æç°å¤„ç†æµç¨‹
```
ç”¨æˆ·ç”³è¯·æç° â†’ ç³»ç»ŸéªŒè¯ä½™é¢ â†’ å†»ç»“æç°é‡‘é¢ â†’ ç®¡ç†å‘˜å®¡æ ¸ â†’ 
å®¡æ ¸é€šè¿‡ï¼šå®Œæˆæç°ï¼Œæ›´æ–°è´¦æˆ· / å®¡æ ¸æ‹’ç»ï¼šé€€è¿˜é‡‘é¢åˆ°å¯ç”¨ä½™é¢
```

## âš™ï¸ é…ç½®è¯´æ˜

### é»˜è®¤é…ç½®
- **ä½£é‡‘æ¯”ä¾‹**: 2% (å¯é…ç½®)
- **å†»ç»“æœŸ**: 15å¤© (å¯é…ç½®)
- **æœ€å°æç°é‡‘é¢**: $10 (å¯é…ç½®)
- **æœ€å¤§å•æ¬¡æç°**: $10,000 (å¯é…ç½®)
- **æç°æ‰‹ç»­è´¹**: 0% (å¯é…ç½®)

### æ¨èç è§„åˆ™
- **æ ¼å¼**: `SYN{ç”¨æˆ·å“ˆå¸Œ}{æ—¶é—´æˆ³}`
- **ç¤ºä¾‹**: `SYNAB1234567890`
- **ç‰¹ç‚¹**: å”¯ä¸€æ€§ã€å¯è¿½æº¯æ€§

## ğŸ”§ å®šæ—¶ä»»åŠ¡

### ä½£é‡‘å¤„ç†ä»»åŠ¡
- **é¢‘ç‡**: æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
- **åŠŸèƒ½**: å¤„ç†å†»ç»“æœŸåˆ°æœŸçš„ä½£é‡‘è®°å½•
- **çŠ¶æ€å˜æ›´**: `frozen` â†’ `available`

### ç»Ÿè®¡æ›´æ–°ä»»åŠ¡
- **é¢‘ç‡**: æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
- **åŠŸèƒ½**: æ›´æ–°æ´»è·ƒæ¨èäººæ•°é‡ç­‰ç»Ÿè®¡ä¿¡æ¯

## ğŸ“Š å‰ç«¯åŠŸèƒ½

### ä½£é‡‘ä¸­å¿ƒé¡µé¢
1. **æ¦‚è§ˆæ ‡ç­¾é¡µ**
   - ä½£é‡‘è´¦æˆ·æ¦‚è§ˆå¡ç‰‡
   - æœ€è¿‘ä½£é‡‘è®°å½•
   - æ¨èç»Ÿè®¡ä¿¡æ¯

2. **æ¨èç®¡ç†æ ‡ç­¾é¡µ**
   - æ¨èé“¾æ¥ç”Ÿæˆå’Œå¤åˆ¶
   - æ¨èç”¨æˆ·åˆ—è¡¨
   - æ¨èç»Ÿè®¡

3. **ä½£é‡‘è®°å½•æ ‡ç­¾é¡µ**
   - ä½£é‡‘è®°å½•åˆ—è¡¨
   - çŠ¶æ€ç­›é€‰
   - åˆ†é¡µæ˜¾ç¤º

4. **æç°è®°å½•æ ‡ç­¾é¡µ**
   - æç°ç”³è¯·åŠŸèƒ½
   - æç°è®°å½•åˆ—è¡¨
   - çŠ¶æ€è·Ÿè¸ª

### æ³¨å†Œé¡µé¢å¢å¼º
- æ¨èç è¾“å…¥å­—æ®µ
- æ¨èç éªŒè¯
- æ¨èäººä¿¡æ¯æ˜¾ç¤º
- URLå‚æ•°è‡ªåŠ¨å¡«å……

## ğŸš€ éƒ¨ç½²è¯´æ˜

### æ•°æ®åº“è¿ç§»
```bash
# æ‰§è¡Œæ•°æ®åº“ç»“æ„æ›´æ–°
npm run init-db
```

### å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ–°å¢ä¾èµ–
npm install node-cron
```

### å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm start
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œä½£é‡‘ç³»ç»Ÿæµ‹è¯•
```bash
node test-commission-system.js
```

### åŠŸèƒ½æµ‹è¯•æ¸…å•
- [ ] æ¨èç ç”Ÿæˆå’ŒéªŒè¯
- [ ] æ¨èå…³ç³»å»ºç«‹
- [ ] ä½£é‡‘è®¡ç®—å’Œè®°å½•
- [ ] å†»ç»“æœŸå¤„ç†
- [ ] æç°ç”³è¯·å’Œå®¡æ ¸
- [ ] å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
- [ ] å‰ç«¯é¡µé¢åŠŸèƒ½

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### å…³é”®æŒ‡æ ‡ç›‘æ§
- æ¨èè½¬åŒ–ç‡
- ä½£é‡‘å‘æ”¾é‡‘é¢
- æç°å¤„ç†æ—¶é—´
- ç³»ç»Ÿé”™è¯¯ç‡

### æ—¥å¸¸ç»´æŠ¤
- å®šæœŸæ£€æŸ¥å®šæ—¶ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
- ç›‘æ§ä½£é‡‘è´¦æˆ·ä½™é¢å‡†ç¡®æ€§
- å®¡æ ¸å¼‚å¸¸æç°ç”³è¯·
- æ›´æ–°ä½£é‡‘è®¾ç½®å‚æ•°

## ğŸ”’ å®‰å…¨è€ƒè™‘

### æ•°æ®å®‰å…¨
- æ¨èå…³ç³»é˜²ç¯¡æ”¹
- ä½£é‡‘é‡‘é¢å®Œæ•´æ€§æ ¡éªŒ
- æç°ä¿¡æ¯åŠ å¯†å­˜å‚¨

### ä¸šåŠ¡å®‰å…¨
- é˜²æ­¢æ¶æ„åˆ·æ¨è
- æç°é‡‘é¢åˆç†æ€§éªŒè¯
- ç®¡ç†å‘˜æƒé™æ§åˆ¶

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12-19)
- âœ… å®Œæ•´çš„ä½£é‡‘ç³»ç»Ÿæ¶æ„
- âœ… æ¨èç å’Œæ¨èå…³ç³»ç®¡ç†
- âœ… ä½£é‡‘è®¡ç®—å’Œå†»ç»“æœŸå¤„ç†
- âœ… æç°ç”³è¯·å’Œç®¡ç†å‘˜å®¡æ ¸
- âœ… å‰ç«¯ä½£é‡‘ä¸­å¿ƒé¡µé¢
- âœ… å®šæ—¶ä»»åŠ¡è‡ªåŠ¨åŒ–å¤„ç†
- âœ… å®Œæ•´çš„APIæ¥å£æ–‡æ¡£

---

## ğŸ¤ è´¡çŒ®

å¦‚éœ€å¯¹ä½£é‡‘ç³»ç»Ÿè¿›è¡Œä¿®æ”¹æˆ–æ‰©å±•ï¼Œè¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
1. ä¿æŒæ•°æ®ä¸€è‡´æ€§
2. ç¡®ä¿äº‹åŠ¡å®Œæ•´æ€§
3. æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
4. æ›´æ–°ç›¸å…³æ–‡æ¡£
5. è¿›è¡Œå……åˆ†æµ‹è¯•

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿï¼š
- é‚®ç®±: info@syntaxdropshipping.com
- ç”µè¯: +86 135 7070 5010